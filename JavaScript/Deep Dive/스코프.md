<!-- @format -->

## **스코프**

스코프는 유효범위를 부르는 말이다.

자바스크립트의 스코프는 다른 언어의 스코프 개념과는 다르기 때문에 주의하자.

스코프는 변수와 함수에 깊은 관련이 있다.

함수의 매개변수는 함수 몸체 내부에서만 참조할 수 있고 함수 몸체 외부에서는 참조할 수 없다. 이것은 매개변수를 참조할 수 잇는 유효범위, 즉 매개변수의 스코프가 함수 몸체 내부로 한정되기 때문이다.

```js
function add(x, y) {
	console.log(x, y); // 2 5
	return x + y;
}

add(2, 5);

// 매개변수는 함수 몸체에서만 참조할 수 있다.
console.log(x, y); // ReferenceError
```

변수는 자신이 선언된 위치에 의해 자신이 유효한 범위, 즉 다른 코드가 변수 자신을 참조할 수 있는 범위가 결정된다. 이는 변수 뿐만 아니라 모든 식별자는 자신이 선언된 위치에 의해 다른 코드가 식별자 자신을 참조할 수 있는 유효 범위가 결정된다. 이를 스코프라 한다.

```js
var x = 'global';

function foo() {
	var x = 'local';
	console.log(x); // 1번
}

foo();

console.log(x); // 2번
```

코드의 가장 바깥 영역과 foo 함수 내부에서 같은 이름을 갖는 변수 x를 선언했다.
각각 1번과 2번에서 x변수를 참조한다.

그럼 자바스크립트엔진에서 어떤 변수를 참조할 것인지를 결정한다. 이를 **식별자 결정**이라고 한다.

<br/>

##### **코드의 문맥과 환경**

코드가 어디서 실행되고 주변에 어떤 코드가 있는지를 렉시컬 환경이라고 부른다.
코드의 문맥은 렉시컬 환경으로 이뤄진다.
이를 구현하는 것이 **실행 컨텍스트**이며 모든 코드는 실행 컨텍스트에서 평가되고 실행된다.

스코프를 통해 변수 이름의 충돌을 방지하여 같은 이름의 변수를 사용할 수 있게 한다.

var 키워드로 선언된 변수는 같은 스코프 내에서 중복선언이 허용된다. 이는 의도치 않는 변수값이 재할당되는 효과를 불러일으킨다.

<br/>

## **스코프의 종류**

코드는 전역과 지역으로 구분할 수 있다.

##### 전역 = 코드의 가장 바깥 부분 = 전역 스코프 = 전역 변수

##### 지역 = 함수 몸체 내부 = 지역 스코프 = 지역 변수

변수는 자신이 선언된 위치에 의해 자신이 유효한 범위인 스코프가 결정된다.

전역 변수는 어디서든지 참조할 수 있다.

### 지역과 지역 스코프

지역이란 함수 몸체 내부를 말한다.

지역 변수는 자신의 지역 스코프와 하위 지역 스코프에서 유효하다

<br/>

## **스코프 체인**

함수는 중첩될 수 있으므로 함수의 지역 스코프도 중첩이 될 수 있다. 이는 곧 스코프가 함수의 중첩에 의해 계층적 구조를 갖는다는 것을 말한더.

외부 함수의 지역 스코프를 중첩 함수의 상위 스코프라고 한다.
